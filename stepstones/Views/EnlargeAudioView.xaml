<views:MediaPlayerViewBase x:Class="stepstones.Views.EnlargeAudioView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:viewmodels="clr-namespace:stepstones.ViewModels"
             xmlns:views="clr-namespace:stepstones.Views"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=viewmodels:EnlargeAudioViewModel}"
             d:DesignHeight="450" 
             d:DesignWidth="800">
    <Grid Width="400"
          Height="400"
          Background="#404040"
          Margin="20">
        <ContentControl Template="{StaticResource FileAudioIconTemplate}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="White"
                        Opacity="0.5"
                        Width="200"
                        Height="200">
        </ContentControl>

        <MediaElement x:Name="MediaPlayer"
                      LoadedBehavior="Manual"
                      UnloadedBehavior="Close"
                      Source="{Binding FilePath}"
                      Stretch="Fill"
                      Volume="0.5">
        </MediaElement>

        <Grid IsHitTestVisible="False">
            <ContentControl x:Name="PlayIndicator"
                            Template="{StaticResource PlayIndicatorTemplate}"
                            Visibility="Collapsed">
            </ContentControl>

            <ContentControl x:Name="PauseIndicator"
                            Template="{StaticResource PauseIndicatorTemplate}"
                            Visibility="Collapsed">
            </ContentControl>
        </Grid>

        <Border x:Name="ControlsOverlay"
                VerticalAlignment="Bottom"
                Background="#cc000000"
                Height="50"
                MouseLeftButtonDown="ControlsOverlay_MouseLeftButtonDown">
            <Grid>
                <Button HorizontalAlignment="Left"
                        Padding="10,0,10,0"
                        Click="PlayPauseButton_Click"
                        Style="{StaticResource TransparentButtonStyle}">

                    <Path x:Name="PlayPauseIcon"
                          Fill="White"
                          Stretch="Uniform"
                          Width="25"
                          Height="25">
                        <Path.Style>
                            <Style TargetType="Path">
                                <Setter Property="Data" Value="{StaticResource PlayIconData}"/>

                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsPlaying, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                 Value="True">
                                        <Setter Property="Data" Value="{StaticResource PauseIconData}"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Path.Style>
                    </Path>
                </Button>

                <Grid x:Name="VolumeControlContainer"
                      HorizontalAlignment="Right"
                      Background="Transparent"
                      Margin="0,0,5,0"
                      MouseEnter="VolumeControlContainer_MouseEnter"
                      MouseLeave="VolumeControlContainer_MouseLeave">
                    <Popup x:Name="VolumePopup"
                           Placement="Top"
                           PlacementTarget="{Binding ElementName=MuteButton}"
                           StaysOpen="True"
                           AllowsTransparency="True"
                           HorizontalOffset="8"
                           VerticalOffset="-5">
                        <Border Background="#444444"
                                Padding="5"
                                CornerRadius="10"
                                MouseEnter="VolumePopup_MouseEnter"
                                MouseLeave="VolumePopup_MouseLeave">
                            <Slider x:Name="VolumeSlider"
                                    Style="{StaticResource VerticalVolumeSliderStyle}"
                                    Orientation="Vertical"
                                    Height="100"
                                    Minimum="0"
                                    Maximum="1"
                                    Value="{Binding Volume, ElementName=MediaPlayer, Mode=TwoWay}"
                                    ValueChanged="VolumeSlider_ValueChanged"
                                    PreviewMouseLeftButtonDown="VolumeSlider_PreviewMouseLeftButtonDown"
                                    PreviewMouseMove="VolumeSlider_PreviewMouseMove"
                                    PreviewMouseLeftButtonUp="VolumeSlider_PreviewMouseLeftButtonUp">
                            </Slider>
                        </Border>
                    </Popup>

                    <Button x:Name="MuteButton"
                            Width="35"
                            Height="35"
                            Click="MuteButton_Click"
                            Style="{StaticResource MuteButtonStyle}">
                    </Button>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</views:MediaPlayerViewBase>
